# EnDB - è‹±å˜èªãƒ¡ãƒ¢ã‚¢ãƒ—ãƒª

## ç‰¹å¾´

- ğŸ“ **å˜èªç®¡ç†**: è‹±å˜èªã®ç™»éŒ²ã€ç·¨é›†ã€å‰Šé™¤ã€æ¤œç´¢
- ğŸ·ï¸ **ã‚«ãƒ†ã‚´ãƒªç®¡ç†**: å˜èªã‚’ã‚«ãƒ†ã‚´ãƒªåˆ¥ã«æ•´ç†
- ğŸ“Š **å­¦ç¿’è¨˜éŒ²**: å¾©ç¿’å›æ•°ã€æ­£ç­”ç‡ã€ç¿’ç†Ÿåº¦ã®è¿½è·¡
- ğŸ“± **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³**: ãƒ¢ãƒã‚¤ãƒ«ãƒ»ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆãƒ»ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—å¯¾å¿œ

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- **SvelteKit**: Reactiveãªãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **TypeScript**: å‹å®‰å…¨ãªé–‹ç™º
- **SCSS**: çµ±ç‡ã®å–ã‚ŒãŸã‚¹ã‚¿ã‚¤ãƒ«ç®¡ç†
- **Cloudflare Pages**: ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
- **Cloudflare Workers**: ã‚¨ãƒƒã‚¸ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
- **Cloudflare D1**: SQLiteãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- **Hono**: è»½é‡Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **TypeScript**: å‹å®‰å…¨ãªAPIå®Ÿè£…

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
endb/
â”œâ”€â”€ backend/                 # Cloudflare Workers
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ index.ts        # ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ types.ts        # å‹å®šç¾©
â”‚   â”‚   â”œâ”€â”€ db.ts           # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œ
â”‚   â”‚   â””â”€â”€ routes/         # APIãƒ«ãƒ¼ãƒˆ
â”‚   â”‚       â”œâ”€â”€ words.ts    # å˜èªAPI
â”‚   â”‚       â”œâ”€â”€ categories.ts # ã‚«ãƒ†ã‚´ãƒªAPI
â”‚   â”‚       â”œâ”€â”€ study.ts    # å­¦ç¿’API
â”‚   â”‚       â””â”€â”€ stats.ts    # çµ±è¨ˆAPI
â”‚   â”œâ”€â”€ migrations/
â”‚   â”‚   â””â”€â”€ 0001_initial.sql # åˆæœŸã‚¹ã‚­ãƒ¼ãƒ
â”‚   â”œâ”€â”€ wrangler.toml       # Workersè¨­å®š
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ frontend/                # SvelteKit ã‚¢ãƒ—ãƒª
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ routes/         # ãƒšãƒ¼ã‚¸
â”‚   â”‚   â”‚   â”œâ”€â”€ +layout.svelte
â”‚   â”‚   â”‚   â”œâ”€â”€ +page.svelte # å˜èªä¸€è¦§
â”‚   â”‚   â”‚   â”œâ”€â”€ categories/  # ã‚«ãƒ†ã‚´ãƒªç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ study/       # å­¦ç¿’ãƒšãƒ¼ã‚¸ï¼ˆæœªå®Ÿè£…ï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ stats/       # çµ±è¨ˆãƒšãƒ¼ã‚¸ï¼ˆæœªå®Ÿè£…ï¼‰
â”‚   â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”‚   â”œâ”€â”€ components/ # UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ types.ts    # å‹å®šç¾©
â”‚   â”‚   â”‚   â””â”€â”€ api.ts      # APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â”‚   â””â”€â”€ styles/         # SCSS
â”‚   â”‚       â”œâ”€â”€ variables.scss
â”‚   â”‚       â”œâ”€â”€ mixins.scss
â”‚   â”‚       â””â”€â”€ global.scss
â”‚   â”œâ”€â”€ svelte.config.js
â”‚   â”œâ”€â”€ vite.config.ts
â”‚   â””â”€â”€ package.json
â””â”€â”€ README.md
```

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### å‰ææ¡ä»¶

- Node.js 18ä»¥ä¸Š
- pnpm
- Cloudflare ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
- Wrangler CLI

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

1. **ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**
   ```bash
   cd backend
   pnpm install
   ```

2. **D1ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ä½œæˆ**
   ```bash
   # D1ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆ
   pnpm wrangler d1 create endb

   # å‡ºåŠ›ã•ã‚ŒãŸdatabase_idã‚’wrangler.tomlã«è¨­å®š
   ```

3. **ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè¡Œ**
   ```bash
   # ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒ
   pnpm wrangler d1 execute endb --local --file=./migrations/0001_initial.sql

   # æœ¬ç•ªç’°å¢ƒ
   pnpm wrangler d1 execute endb --file=./migrations/0001_initial.sql
   ```

4. **é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•**
   ```bash
   pnpm dev
   ```

   Workers ã¯ `http://localhost:8787` ã§èµ·å‹•ã—ã¾ã™ã€‚

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

1. **ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**
   ```bash
   cd frontend
   pnpm install
   ```

2. **é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•**
   ```bash
   pnpm dev
   ```

   ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ `http://localhost:5173` ã§èµ·å‹•ã—ã¾ã™ã€‚

## API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

### å˜èªç®¡ç†
- `GET /api/words` - å˜èªä¸€è¦§å–å¾—
  - ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿: `search`, `category_id`, `mastery_level`
- `GET /api/words/:id` - å˜èªè©³ç´°å–å¾—
- `POST /api/words` - å˜èªç™»éŒ²
- `PUT /api/words/:id` - å˜èªæ›´æ–°
- `DELETE /api/words/:id` - å˜èªå‰Šé™¤

### ã‚«ãƒ†ã‚´ãƒªç®¡ç†
- `GET /api/categories` - ã‚«ãƒ†ã‚´ãƒªä¸€è¦§å–å¾—
- `GET /api/categories/:id` - ã‚«ãƒ†ã‚´ãƒªè©³ç´°å–å¾—
- `POST /api/categories` - ã‚«ãƒ†ã‚´ãƒªä½œæˆ
- `PUT /api/categories/:id` - ã‚«ãƒ†ã‚´ãƒªæ›´æ–°
- `DELETE /api/categories/:id` - ã‚«ãƒ†ã‚´ãƒªå‰Šé™¤

### å­¦ç¿’æ©Ÿèƒ½
- `GET /api/study/random?count=10` - ãƒ©ãƒ³ãƒ€ãƒ ã«å˜èªå–å¾—
- `POST /api/study/record` - å­¦ç¿’çµæœè¨˜éŒ²

### çµ±è¨ˆæƒ…å ±
- `GET /api/stats` - çµ±è¨ˆæƒ…å ±å–å¾—

## ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ

### words ãƒ†ãƒ¼ãƒ–ãƒ«
- `id`: å˜èªID
- `en`: è‹±å˜èª
- `ja`: æ—¥æœ¬èªè¨³
- `example`: ä¾‹æ–‡
- `notes`: ãƒ¡ãƒ¢
- `category_id`: ã‚«ãƒ†ã‚´ãƒªID
- `created_at`: ä½œæˆæ—¥æ™‚
- `updated_at`: æ›´æ–°æ—¥æ™‚
- `last_reviewed_at`: æœ€çµ‚å¾©ç¿’æ—¥æ™‚
- `review_count`: å¾©ç¿’å›æ•°
- `correct_count`: æ­£è§£å›æ•°
- `mastery_level`: ç¿’ç†Ÿåº¦ï¼ˆ0-5ï¼‰

### categories ãƒ†ãƒ¼ãƒ–ãƒ«
- `id`: ã‚«ãƒ†ã‚´ãƒªID
- `name`: ã‚«ãƒ†ã‚´ãƒªå
- `color`: ã‚«ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰
- `description`: èª¬æ˜
- `created_at`: ä½œæˆæ—¥æ™‚

### study_sessions ãƒ†ãƒ¼ãƒ–ãƒ«
- `id`: ã‚»ãƒƒã‚·ãƒ§ãƒ³ID
- `word_id`: å˜èªID
- `result`: çµæœï¼ˆcorrect/incorrectï¼‰
- `timestamp`: ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—

## ãƒ‡ãƒ—ãƒ­ã‚¤

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆWorkersï¼‰ã®ãƒ‡ãƒ—ãƒ­ã‚¤

```bash
cd backend
pnpm deploy
```

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆPagesï¼‰ã®ãƒ‡ãƒ—ãƒ­ã‚¤

1. **GitHubã«ãƒ—ãƒƒã‚·ãƒ¥**
   ```bash
   git add .
   git commit -m "Initial commit"
   git push origin main
   ```

2. **Cloudflare Pagesã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ**
   - Cloudflare ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‹ã‚‰ Pages ã‚’é¸æŠ
   - GitHubãƒªãƒã‚¸ãƒˆãƒªã‚’é€£æº
   - ãƒ“ãƒ«ãƒ‰è¨­å®š:
     - Build command: `pnpm build`
     - Build output directory: `build`
     - Root directory: `frontend`

3. **ç’°å¢ƒå¤‰æ•°ã®è¨­å®š**
   - `NODE_VERSION`: `18` ã¾ãŸã¯ `20`

## ä»Šå¾Œã®å®Ÿè£…äºˆå®š

### ãƒ•ã‚§ãƒ¼ã‚º2: å­¦ç¿’æ©Ÿèƒ½
- [ ] ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ã‚«ãƒ¼ãƒ‰ UI
- [ ] ã‚¯ã‚¤ã‚ºãƒ¢ãƒ¼ãƒ‰
- [ ] å­¦ç¿’å±¥æ­´ã®è¨˜éŒ²

### ãƒ•ã‚§ãƒ¼ã‚º3: é€²æ—ç®¡ç†
- [ ] ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
- [ ] çµ±è¨ˆã‚°ãƒ©ãƒ•
- [ ] å¾©ç¿’é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ 
- [ ] é–“éš”åå¾©å­¦ç¿’ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 

### è¿½åŠ æ©Ÿèƒ½æ¡ˆ
- [ ] éŸ³å£°èª­ã¿ä¸Šã’ï¼ˆWeb Speech APIï¼‰
- [ ] CSV/JSONã§ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆ/ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
- [ ] ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰
- [ ] PWAå¯¾å¿œï¼ˆã‚ªãƒ•ãƒ©ã‚¤ãƒ³å­¦ç¿’ï¼‰

